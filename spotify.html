<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <button id="spotify">Login</button>
    <script>
      $(document).ready(function () {
        let token = location.hash.substring(1).split("&")[0].split("=")[1];

        spotifyCallback = (payload) => {
          sessionStorage.setItem("access_token", payload);
          window.location = "http://127.0.0.1:5500/login.html";
        };

        if (token) {
          spotifyCallback(token);
        }

        $("#spotify").click(function () {
          base_url = "https://accounts.spotify.com/authorize?";
          client_id = "client_id=7c62586e78b4439e82cba40ac1d1fc4f&";
          redirect_uri =
            "redirect_uri=" + "http://127.0.0.1:5500/spotify.html" + "&";
          response_type = "response_type=token";
          let popup = window.open(
            base_url + client_id + redirect_uri + response_type,
            "_self"
          );
        });
      });
    </script>
  </body>
</html>
